{"version":3,"sources":["/Users/kevin/Dev/_archive/@unmaintained/big-int-stats/src/toStats.ts"],"sourcesContent":["import type { BigIntStats, Stats, StatsBase } from 'fs';\nimport fs from 'fs';\nimport JSBI from 'jsbi-compat';\n\nconst kNsPerMsBigInt = JSBI.BigInt(10 ** 6);\n\nimport type { AnyStats } from './types.ts';\n\nexport default function toStats(stats: AnyStats): Stats {\n  if (typeof (stats as StatsBase<number>).dev !== 'bigint') return stats as Stats;\n\n  const bigStats = stats as BigIntStats;\n  // @ts-ignore\n  return new fs.Stats(\n    Number(bigStats.dev),\n    Number(bigStats.mode),\n    Number(bigStats.nlink),\n    Number(bigStats.uid),\n    Number(bigStats.gid),\n    Number(bigStats.rdev),\n    Number(bigStats.blksize),\n    Number(bigStats.ino),\n    Number(bigStats.size),\n    Number(bigStats.blocks),\n    Number(bigStats.atimeNs ? JSBI.divide(bigStats.atimeNs, kNsPerMsBigInt) : bigStats.atimeMs),\n    Number(bigStats.mtimeNs ? JSBI.divide(bigStats.mtimeNs, kNsPerMsBigInt) : bigStats.mtimeMs),\n    Number(bigStats.ctimeNs ? JSBI.divide(bigStats.ctimeNs, kNsPerMsBigInt) : bigStats.ctimeMs),\n    Number(bigStats.birthtimeNs ? JSBI.divide(bigStats.birthtimeNs, kNsPerMsBigInt) : bigStats.birthtimeMs)\n  );\n}\n"],"names":["fs","JSBI","kNsPerMsBigInt","BigInt","toStats","stats","dev","bigStats","Stats","Number","mode","nlink","uid","gid","rdev","blksize","ino","size","blocks","atimeNs","divide","atimeMs","mtimeNs","mtimeMs","ctimeNs","ctimeMs","birthtimeNs","birthtimeMs"],"mappings":"AACA,OAAOA,QAAQ,KAAK;AACpB,OAAOC,UAAU,cAAc;AAE/B,MAAMC,iBAAiBD,KAAKE,MAAM,CAAC,MAAM;AAIzC,eAAe,SAASC,QAAQC,KAAe;IAC7C,IAAI,OAAO,AAACA,MAA4BC,GAAG,KAAK,UAAU,OAAOD;IAEjE,MAAME,WAAWF;IACjB,aAAa;IACb,OAAO,IAAIL,GAAGQ,KAAK,CACjBC,OAAOF,SAASD,GAAG,GACnBG,OAAOF,SAASG,IAAI,GACpBD,OAAOF,SAASI,KAAK,GACrBF,OAAOF,SAASK,GAAG,GACnBH,OAAOF,SAASM,GAAG,GACnBJ,OAAOF,SAASO,IAAI,GACpBL,OAAOF,SAASQ,OAAO,GACvBN,OAAOF,SAASS,GAAG,GACnBP,OAAOF,SAASU,IAAI,GACpBR,OAAOF,SAASW,MAAM,GACtBT,OAAOF,SAASY,OAAO,GAAGlB,KAAKmB,MAAM,CAACb,SAASY,OAAO,EAAEjB,kBAAkBK,SAASc,OAAO,GAC1FZ,OAAOF,SAASe,OAAO,GAAGrB,KAAKmB,MAAM,CAACb,SAASe,OAAO,EAAEpB,kBAAkBK,SAASgB,OAAO,GAC1Fd,OAAOF,SAASiB,OAAO,GAAGvB,KAAKmB,MAAM,CAACb,SAASiB,OAAO,EAAEtB,kBAAkBK,SAASkB,OAAO,GAC1FhB,OAAOF,SAASmB,WAAW,GAAGzB,KAAKmB,MAAM,CAACb,SAASmB,WAAW,EAAExB,kBAAkBK,SAASoB,WAAW;AAE1G"}