{"version":3,"sources":["/Users/kevin/Dev/_archive/@unmaintained/big-int-stats/src/toStats.ts"],"sourcesContent":["import type { BigIntStats, Stats, StatsBase } from 'fs';\nimport fs from 'fs';\nimport JSBI from 'jsbi-compat';\n\nconst kNsPerMsBigInt = JSBI.BigInt(10 ** 6);\n\nimport type { AnyStats } from './types.ts';\n\nexport default function toStats(stats: AnyStats): Stats {\n  if (typeof (stats as StatsBase<number>).dev !== 'bigint') return stats as Stats;\n\n  const bigStats = stats as BigIntStats;\n  // @ts-ignore\n  return new fs.Stats(\n    Number(bigStats.dev),\n    Number(bigStats.mode),\n    Number(bigStats.nlink),\n    Number(bigStats.uid),\n    Number(bigStats.gid),\n    Number(bigStats.rdev),\n    Number(bigStats.blksize),\n    Number(bigStats.ino),\n    Number(bigStats.size),\n    Number(bigStats.blocks),\n    Number(bigStats.atimeNs ? JSBI.divide(bigStats.atimeNs, kNsPerMsBigInt) : bigStats.atimeMs),\n    Number(bigStats.mtimeNs ? JSBI.divide(bigStats.mtimeNs, kNsPerMsBigInt) : bigStats.mtimeMs),\n    Number(bigStats.ctimeNs ? JSBI.divide(bigStats.ctimeNs, kNsPerMsBigInt) : bigStats.ctimeMs),\n    Number(bigStats.birthtimeNs ? JSBI.divide(bigStats.birthtimeNs, kNsPerMsBigInt) : bigStats.birthtimeMs)\n  );\n}\n"],"names":["toStats","kNsPerMsBigInt","JSBI","BigInt","stats","dev","bigStats","fs","Stats","Number","mode","nlink","uid","gid","rdev","blksize","ino","size","blocks","atimeNs","divide","atimeMs","mtimeNs","mtimeMs","ctimeNs","ctimeMs","birthtimeNs","birthtimeMs"],"mappings":";;;;+BAQA;;;eAAwBA;;;yDAPT;iEACE;;;;;;;;;;AAEjB,IAAMC,iBAAiBC,mBAAI,CAACC,MAAM,CAAC,KAAA,IAAA,IAAM;AAI1B,SAASH,QAAQI,KAAe;IAC7C,IAAI,SAAO,AAACA,MAA4BC,GAAG,MAAK,UAAU,OAAOD;IAEjE,IAAME,WAAWF;IACjB,aAAa;IACb,OAAO,IAAIG,WAAE,CAACC,KAAK,CACjBC,OAAOH,SAASD,GAAG,GACnBI,OAAOH,SAASI,IAAI,GACpBD,OAAOH,SAASK,KAAK,GACrBF,OAAOH,SAASM,GAAG,GACnBH,OAAOH,SAASO,GAAG,GACnBJ,OAAOH,SAASQ,IAAI,GACpBL,OAAOH,SAASS,OAAO,GACvBN,OAAOH,SAASU,GAAG,GACnBP,OAAOH,SAASW,IAAI,GACpBR,OAAOH,SAASY,MAAM,GACtBT,OAAOH,SAASa,OAAO,GAAGjB,mBAAI,CAACkB,MAAM,CAACd,SAASa,OAAO,EAAElB,kBAAkBK,SAASe,OAAO,GAC1FZ,OAAOH,SAASgB,OAAO,GAAGpB,mBAAI,CAACkB,MAAM,CAACd,SAASgB,OAAO,EAAErB,kBAAkBK,SAASiB,OAAO,GAC1Fd,OAAOH,SAASkB,OAAO,GAAGtB,mBAAI,CAACkB,MAAM,CAACd,SAASkB,OAAO,EAAEvB,kBAAkBK,SAASmB,OAAO,GAC1FhB,OAAOH,SAASoB,WAAW,GAAGxB,mBAAI,CAACkB,MAAM,CAACd,SAASoB,WAAW,EAAEzB,kBAAkBK,SAASqB,WAAW;AAE1G"}